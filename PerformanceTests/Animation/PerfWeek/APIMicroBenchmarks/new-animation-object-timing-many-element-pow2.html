<!DOCTYPE html>
<html>
<body>
<script src="../../../resources/runner.js"></script>
<div id="container">
    <div id="element0"></div>
    <div id="element1"></div>
    <div id="element2"></div>
    <div id="element3"></div>
</div>
<script>
var elements;
var keyframes;
var players;
var timing;
PerfTestRunner.measureRunsPerSecond({
    description: "This benchmark tests Animation constructor in the Web Animations API with object timing and many elements.",
    setup: function() {
        elements = [
            document.getElementById('element0'),
            document.getElementById('element1'),
            document.getElementById('element2'),
            document.getElementById('element3'),
        ];
        keyframes = [
            { opacity: 0, offset: 0 },
            { opacity: 1, offset: 1 }
        ];
        players = [];
        timing = { duration: 2000000 };
        if (window.GCController)
            window.GCController.collect();
    },
    run: function() {
        for (var i = 0; i < 100; i++) {
            players.push(new Animation(elements[i % elements.length], keyframes, timing));
}}});
</script>
</body>
</html>
