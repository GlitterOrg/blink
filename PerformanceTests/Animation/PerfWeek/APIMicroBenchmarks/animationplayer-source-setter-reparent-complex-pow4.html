<!DOCTYPE html>
<script src="../../../resources/runner.js"></script>
<div id="target"></div>
<script>
var source;
var players;
PerfTestRunner.measureRunsPerSecond({
    description: "This benchmark tests setting AnimationPlayer.source and reparenting an Animation with many Keyframes",
    setup: function() {
        var keyframes = [];
        for (var i = 0; i < 50; i++) {
            keyframes.push({'left': '100px', 'top': '200px', 'margin-right': '50px', 'color': 'black'});
            keyframes.push({'left': '400px', 'top': '700px', 'margin-right': '90px', 'color': 'green'});
        }
        source = new Animation(target, keyframes);
        players = [document.timeline.play(null), document.timeline.play(null)];
        if (players[0].source === undefined) {
            throw "ImNotTestingThis";
        }
    },
    run: function() {
        for (var i = 0; i < 10000; i++)
            players[i % 2].source = source;
    }
});
</script>
