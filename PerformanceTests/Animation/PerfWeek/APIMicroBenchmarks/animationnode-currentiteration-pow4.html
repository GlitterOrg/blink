<!DOCTYPE html>
<script src="../../../resources/runner.js"></script>
<div id="target"></div>
<script>
var animation;
var timing;
PerfTestRunner.measureRunsPerSecond({
    description: "This benchmark tests invalidating then getting AnimationNode.currentIteration",
    setup: function() {
        var player = target.animate([], {duration: 1000, iterations: 100});
        player.currentTime = 5000;
        animation = player.source;
        timing = animation.timing || animation.specified;
    },
    run: function() {
        for (var i = 0; i < 10000; i++) {
            // Invalidate the animation's timing information
            timing.playbackRate = 1 + i % 2;

            animation.currentIteration;
        }
    }
});
</script>
